<html>
<body>
    <h1 style="text-align: center;">Loan Approval FORM</h1>
    <form name="RegForm"
          onsubmit="return GEEKFORGEEKS()" method="get" id="myAnchor">
        <p>Name: <input type="text" 
                        size="65" name="Name" /></p>
        <br />
        <p>Salary <input type="text" 
                           size="65" name="Salary" /></p>
        <br />
        <p>Loan Amount <input type="text" 
                               size="65" name="Loan" /></p>
        <br />
        <p>Credit Score <input type="text" 
                               size="65" name="creditscore" /></p>
        <br />
       
        <p>
            <input type="submit" 
                   value="send" name="Submit" />
        </p>
    </form>
</body>



<script>
    function GEEKFORGEEKS() {
        var name = document.forms["RegForm"]["Name"];
        var salary = document.forms["RegForm"]["Salary"];
        var loan = document.forms["RegForm"]["Loan"];
        var creditscore = document.forms["RegForm"]["creditscore"];

  
        if (name.value == "") {
            window.alert("Please enter your name.");
            name.focus();
            return false;
        }
  
        if (salary.value == "") {
            salary.alert("Please enter your salary.");
            salary.focus();
            return false;
        }
  
        if (loan.value == "") {
            window.alert(
              "Please enter a loan amount");
              loan.focus();
            return false;
        }

        if (creditscore.value == "") {
            window.alert(
              "Please enter a creditscore amount");
              loan.focus();
            return false;
        }


        fetch('/validateLoan?name='+name.value+'&'+'salary='+salary.value+'&loan='+loan.value+'&creditscore='+creditscore.value).then(function(response) {
          return response.json();
        }).then(function(data) {
          if(data.status === 200){
            window.alert(
              "Loan is approved");
              loan.focus();
            return false;
          }else{
            window.alert(
              "Loan is rejected");
              loan.focus();
            return false;
          }
        }).catch(function() {
          console.log("Booo");
        });


        // return true;
    }


    document.getElementById("myAnchor").addEventListener("submit", function(event){
      
  event.preventDefault()

  console.log("I am hererer")
});


</script>
</html>